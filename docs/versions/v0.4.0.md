# v0.4.0: Docker Sandboxing

**Status:** Planned

## Overview

Isolated Docker-based execution environment for trigger testing.

## Problem

Currently, trigger tests execute commands directly on the user's machine:
- Package installations modify the system
- File operations affect real files
- Untrusted skills could cause damage

## Solution

Run trigger tests inside Docker containers:
- Isolated filesystem
- No impact on host system
- Reproducible environment
- User can choose: `--sandbox` (Docker) or `--local` (direct execution)

## CLI Commands

```bash
# Run in Docker sandbox (default when available)
sklab test-triggers ./my-skill --sandbox

# Run directly on local machine (current behavior)
sklab test-triggers ./my-skill --local

# Auto-detect: use Docker if available, fallback to local
sklab test-triggers ./my-skill
```

## Architecture

```
src/skill_lab/
├── runtimes/
│   ├── docker_runtime.py      # Docker-wrapped execution
│   └── sandbox_manager.py     # Container lifecycle
└── docker/
    └── Dockerfile.sandbox     # Base image for sandbox
```

## Deliverables

- [ ] DockerRuntime adapter
- [ ] Sandbox container management
- [ ] Dockerfile for sandbox environment
- [ ] `--sandbox` / `--local` CLI flags
- [ ] Auto-detection of Docker availability

## Verification

```bash
# Test sandbox execution
sklab test-triggers ./my-skill --sandbox

# Verify isolation (files created in container, not on host)
ls ./my-skill/  # Should not have new files
```
